<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="/main.css" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <script type="module" src="./scripts/game.js"></script>
    <script type="module" src="./scripts/ui.js"></script>
  </head>

  <body>
    <div id="root-window" style="display: flex; height: 100%">
      <!-- Left: Game View (70%) -->
      <div
        id="game-container"
        style="flex: 7; position: relative; min-width: 0"
      >
        <!-- Three.js adds a `canvas` element to this element-->
        <div id="render-target"></div>
        <div id="loading" class="text-overlay">
          <div>LOADING...</div>
        </div>
        <div id="status-bar">
          <div class="status-item">
            <span id="population-counter">0</span>
            <span class="status-label">Population</span>
          </div>
          <div class="status-item">
            <div id="happiness-bar">
              <div id="happiness-fill"></div>
            </div>
            <span id="happiness-value">50%</span>
          </div>
          <div class="status-item" id="request-badge-container">
            <span id="request-badge">0</span>
            <span class="status-label">Requests</span>
          </div>
        </div>
        <div id="ui">
          <div id="info-panel" class="container"></div>
        </div>
      </div>

      <!-- Resize Handle -->
      <div id="resize-handle"></div>

      <!-- Right: AI Chat Panel (30%) -->
      <div id="chat-container">
        <div id="chat-header">
          <div id="chat-title">AI Mayor</div>
        </div>
        <div id="chat-messages"></div>
        <div id="chat-quick-actions">
          <button class="chat-quick-btn" data-action="happiness">
            Check Happiness
          </button>
          <button class="chat-quick-btn" data-action="starter">
            Build Starter Town
          </button>
          <button class="chat-quick-btn" data-action="requests">
            View Requests
          </button>
        </div>
        <div id="chat-input-area">
          <input
            type="text"
            id="chat-input"
            placeholder="Ask the AI Mayor..."
            autocomplete="off"
          />
          <button id="chat-mic" title="Voice chat with AI Mayor">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="9" y="1" width="6" height="11" rx="3" ry="3"/>
              <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
              <line x1="12" y1="19" x2="12" y2="23"/>
              <line x1="8" y1="23" x2="16" y2="23"/>
            </svg>
          </button>
          <button id="chat-send">Send</button>
        </div>
      </div>
    </div>
  </body>
</html>
